<!doctype html>
<html class="no-js" lang="">
<head>
    <meta charset="utf-8">
    <title>Vlab3</title>
    <meta name="description" content="Virtual Lab">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script>
/*<![CDATA[*/
function numTimestamp() {
    var d=new Date();
    var month=d.getMonth()+1;
    var day=d.getDate();
    var minutes=d.getMinutes();
    var seconds=d.getSeconds();
    var hours=d.getHours();
    return ""+d.getFullYear()+((month>9)?month:("0"+month))+((day>9)?day:("0"+day))+((hours>9)?hours:("0"+hours))
            +((minutes>9)?minutes:("0"+minutes))+((seconds>9)?seconds:("0"+seconds));
}

function activateSession (e) {
    let vlabsession= numTimestamp()+"_chemwiki"+(Math.floor(Math.random() * (9999999 -1000000 )) + 1000000);

    let message = {
        assignmentPath: "Community/ualr/diproticAcid",
        userName: "Anonymous",
        session: vlabsession,
        loggingEnabled: false,
        destination: "server"
    };
    const labframe = document.getElementById("labframe")
	const labframeWindow = labframe.contentWindow;
    console.log(message,e);
    labframe.onload = function () {
	    labframeWindow.postMessage(message, "https://chemcollective.oli.cmu.edu");
    }
}

window.addEventListener("DOMContentLoaded", activateSession);

        function getWorkbenchItems() {
            return labInfo.getWorkbenchItems();
        }
        function isFinishedLoading() {
            return labInfo.isFinishedLoading();
        }
        function getSelectedItem() {
            return labInfo.getSelectedItem();
        }
        function loadAssignmentJSON(data) {
            labInfo.loadAssignmentJSON(data);
        }
    </script>
    <!-- endbuild -->
</head>
<body>
<!--[if lt IE 10]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

<h2>
  Making a New Virtual Lab
</h2>

<p>You can create your own virtual lab by forking this repository on Github and following the steps below.</p>



<iframe id="labframe" src="https://chemcollective.oli.cmu.edu/chem/jsvlab/vlab.html" style="width:100%; height: 650px;">
</iframe>
<!-- build:js scripts/main.js -->
<!-- endbuild -->

<script>
	// 	var labframe = document.getElementById("labframe").contentWindow;
	// 	labframe.onload = function () {
    //   // Change the targetOrigin to your domain  
	// 		labframe.postMessage(message, "https://ryanpdwyer.github.io/");
	// 	}
</script>
</body>
</html>